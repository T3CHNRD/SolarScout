<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlackoutBuddy - Power Usage Calculator</title>
   <style>
        :root {
            --purple-gradient-dark: #4c3a5f;
            --purple-gradient-light: #826894;
            --nav-purple: rgba(255, 255, 255, 0.1);
            --text-white: #ffffff;
            --card-bg: #ffffff;
            --text-dark: #333333;
            --border-color: #e0e0e0;
            --accent-blue: #7fb0d0;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --section-bg: #f8f9fa;
            --area51-light: #2d2d2d;
        }
 
        {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}
    
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            color: var(--text-dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
    
        .header, .footer {
            background: linear-gradient(135deg, var(--area51-light), var(--purple-gradient-light));
            color: var(--text-white);
        }
    
        .header {
            padding: 2rem 0;
            text-align: center;
        }
    
        .header h1 {
            margin: 0 0 1.5rem 0;
            font-size: 2rem;
            font-weight: 600;
        }

        .title {
           text-align: center;
           margin: 1rem auto;
           max-width: 90%;  /* Adjust percentage as needed */
        }
    
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }
    
        .nav-button {
            background: var(--nav-purple);
            border: none;
            color: var(--text-white);
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s ease;
            text-decoration: none;
        }
    
        .nav-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .shop-link {
           color: #FFD700; /* This is a gold color */
           font-weight: bold;
        text-decoration: underline;
        }

.shop-link:hover {
    color: #FFA500; /* This changes the color to orange when hovering */
}
    
        .calculator-card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 2px 10px var(--shadow-color);
            max-width: 1200px;
            margin: -2rem auto 2rem;
            padding: 2rem;
            position: relative;
            flex: 1;
        }
    
        .section {
            margin: 2rem 0;
            padding: 1rem;
            background: var(--section-bg);
            border-radius: 8px;
        }
    
        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
            color: var(--purple-gradient-dark);
            margin: 0 0 1rem 0;
        }
    
        .section-description {
            color: #666;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }
    
        .input-group {
            margin-bottom: 1.5rem;
        }
    
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
            font-size: 0.9rem;
        }
    
        input, select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 0.9rem;
        }
    
        input:focus, select:focus {
            outline: none;
            border-color: var(--purple-gradient-light);
        }
    
        .instructions {
            margin: 1rem 0;
            text-align: center;
            padding: 1rem;
            background: var(--your-background-color);
            border-radius: 8px;
            line-height: 1.5;
        }

        .instructions ol {
            display: inline-block;  /* This helps maintain proper list alignment while centered */
            text-align: left;       /* This keeps the list items left-aligned for better readability */
            margin: 1rem auto;
        }

        .appliance-grid {
            display: grid;
            gap: 20px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 40px;
        }

        .appliance-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
            gap: 40px;
            align-items: center;
            padding: 10px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
              }
    
        .results {
            background: linear-gradient(135deg, var(--purple-gradient-dark), var(--purple-gradient-light));
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 2rem;
            color: var(--text-white);
        }
        .recommendation-section {
            list-style: none;
            padding: 0;
            margin: 0;
        }

.recommendation-section li {
          list-style: none;
          padding: 0;
          margin: 0;
        }
    
        .result-item {
            padding: 0.75rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
    
        .result-item:last-child {
            border-bottom: none;
            font-weight: 600;
            font-size: 1.1rem;
        }
    
        .recommendation {
            margin-top: 2rem;
            padding: 1.5rem;
            background: var(--section-bg);
            border-radius: 8px;
            border-left: 4px solid var(--purple-gradient-light);
        }
    
        .estimation-note {
            text-align: center;
            padding: 1rem;
            color: #666;
            font-size: 0.9rem;
            font-style: italic;
            margin: 2rem 0 0 0;
        }
    
        .footer {
            background:linear-gradient(135deg, var(--area51-light), var(--purple-gradient-light));
            color: var(--text-white);
            padding: 1rem;
            text-align: center;
            margin-top: auto;
        }

    
        .footer-text {
            font-size: 0.9rem;
            color: var(--text-white);
            opacity: 0.9;
        }
        
    
        @media (max-width: 1200px) {
            .calculator-card {
                margin: -1rem 1rem 2rem;
                padding: 1.5rem;
            }
    
    
            .nav-buttons {
                flex-direction: column;
                align-items: center;
            }
    
            .nav-button {
                width: 80%;
            }
        }
/* Base styles remain unchanged */

/* Responsive adjustments */
@media screen and (max-width: 768px) {
  /* Navigation */
  .nav-button {
    display: block;
    width: 100%;
    text-align: center;
    margin: 5px 0;
    padding: 10px;
  }

  /* Title */
  .title {
    font-size: 1.5rem;
    padding: 10px;
    text-align: center;
  }

  /* Instructions */
  .instructions {
    padding: 15px;
    margin: 10px;
  }

  /* Appliance grid */
  .appliance-grid {
    overflow-x: auto;
    padding: 10px;
  }

  .appliance-row {
    display: grid;
    grid-template-columns: minmax(120px, 1fr) minmax(80px, 1fr) minmax(80px, 1fr) minmax(80px, 1fr) minmax(80px, 1fr);
    gap: 10px;
    padding: 8px;
  }

  .grid-header {
    font-size: 0.9rem;
  }

  /* Results section */
  .results {
    padding: 15px;
    margin: 10px;
  }

  .total-power {
    display: flex;
    flex-direction: column;
    gap: 10px;
    text-align: center;
  }

  .recommendation-section {
    padding: 15px;
    margin-top: 15px;
  }
}

/* Small phone screens */
@media screen and (max-width: 480px) {
  .appliance-row {
    font-size: 0.85rem;
    grid-template-columns: minmax(100px, 1fr) minmax(70px, 1fr) minmax(70px, 1fr) minmax(70px, 1fr) minmax(70px, 1fr);
    gap: 5px;
  }

  .grid-header {
    font-size: 0.8rem;
  }

  /* Make the table horizontally scrollable on very small screens */
  .appliance-grid {
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
  }

  /* Adjust spacing */
  .instructions ol {
    padding-left: 20px;
    margin: 10px 0;
  }

  /* Make buttons more tappable */
  button, input, select {
    min-height: 44px; /* Standard minimum touch target size */
  }
}

/* Medium tablets */
@media screen and (min-width: 769px) and (max-width: 1024px) {
  .calculator-card {
    margin: 20px auto;
    max-width: 90%;
  }

  .appliance-row {
    gap: 15px;
  }

  .nav-button {
    padding: 8px 15px;
    margin: 0 5px;
  }
}

/* Ensure inputs and interactive elements are easily tappable */
@media (hover: none) and (pointer: coarse) {
  input, select, button {
    padding: 12px;
    margin: 5px 0;
  }
  
  /* Add some space between interactive elements */
  .appliance-row > * {
    margin: 5px 0;
  }
}
        
    </style>
</head>
<body>
   <div class="header">
            <div class="nav-buttons">
                <a href="index.html" class="nav-button">Home</a>
                <a href="about.html" class="nav-button">About Solar Scout</a>
                <a href="https://www.linspyre.com/ecoholics/calc_voc.html" class="nav-button">Solar Basics</a>
                <a href="finalcalcwithstyle.html" class="nav-button">Solar Scout Whole Home Power Planner</a>
                <a href="https://us.ecoflow.com?sca_ref=7408943.R33f7CbNF7&utm_source=uppromote&utm_medium=community&utm_campaign=koc" class="nav-button">Save 5% at Ecoflow.com</a>
            </div>
            <br>
            <div style="margin-top: 2em; text-align: center; padding-center: px;">
            <h1 class="header-title">BlackoutBuddy - Portable Power Usage Calculator</h1>
        </div>
            <div class="action-buttons">
                <div style="margin-top: 2em; text-align: center; padding-center: px;">
                    <button id="resetButton" class="nav-button">Reset Calculator</button>
                <button onclick="printResults()" class="nav-button">Print Results</button>
            </div>
        </div>
        </div>

        <div class="instructions">
            <p>Welcome to BlackoutBuddy! This calculator helps you plan your portable power needs:</p>
            <ol>
                <li>Select your appliances from the list below</li>
                <li>Enter how many hours per day you plan to run each item</li>
                <li>The calculator will show your total power needs and recommend solutions</li>
                <li>All pre-filled numbers are average estimates. Please adjust these numbers to match your specific product's wattage</li>
                <li>If you select "Other" from the dropdown menu, you will need to manually enter the wattage for your appliance</li>
                <li>For multiple days, convert to total hours (example: 2 days = 48 hours, 3 days = 72 hours)</li>
                <li>Don't Forget you can save 5% by using the code " solarscout " at checkout on Ecoflow.com</li>
            </ol>

        <div class="appliance-grid">
            <div class="appliance-row grid-header">
                <div>Appliance</div>
                <div>Running Watts</div>
                <div>Starting Watts</div>
                <div>Hours/Day</div>
                <div>Daily kWh</div>
            </div>
            <div id="applianceRows"></div>
        </div>

        <div class="results">
            <div class="total-power">
                <div id="totalWatts">Total Running Watts: 0 W</div>
                <div id="totalStarting">Total Starting Watts: 0 W</div>
                <div id="totalKwh">Total Daily Usage: 0 kWh</div>
            </div>
            <div id="recommendation" class="recommendation-section">
                Select appliances to get recommendations.
            
            </div>

            
        </div>
    </div>

    <footer class="footer">
        © 2024 T3CHNRD - Designed with help by Claude. All rights reserved.
      </footer>

    <script>
            const commonAppliances = [
            {
                name: "Refrigerator",
                runningWatts: 150,
                startingWatts: 1200,
                category: "Essential"
            },
            {
                name: "CPAP",
                runningWatts: 60,
                startingWatts: 100,
                category: "Essential"
            },
            {
                name: "Freezer",
                runningWatts: 100,
                startingWatts: 800,
                category: "Essential"
            },
            {
                name: "Microwave",
                runningWatts: 1000,
                startingWatts: 1500,
                category: "Kitchen"
            },
            {
                name: "Electric Stove",
                runningWatts: 2000,
                startingWatts: 2100,
                category: "Kitchen"
            },
            {
                name: "Coffee Pot - Keurig",
                runningWatts: 1500,
                startingWatts: 1500,
                category: "Kitchen"
            },
            {
                name: "Air Conditioner (Window)",
                runningWatts: 1000,
                startingWatts: 2200,
                category: "Climate"
            },
            {
                name: "Box Fan",
                runningWatts: 75,
                startingWatts: 100,
                category: "Climate"
            },
            {
                name: "Space Heater",
                runningWatts: 1500,
                startingWatts: 1500,
                category: "Climate"
            },
            {
                name: "Television",
                runningWatts: 100,
                startingWatts: 150,
                category: "Entertainment"
            },
            {
                name: "Desktop Computer",
                runningWatts: 200,
                startingWatts: 200,
                category: "Entertainment"
            },
            {
                name: "Washing Machine",
                runningWatts: 500,
                startingWatts: 1200,
                category: "Laundry"
            },
            {
                name: "OTHER - insert your own values",
                runningWatts: 0,
                startingWatts: 0,
                category: "Other"
            },
            {
                name: "Electric Clothes Dryer",
                runningWatts: 3000,
                startingWatts: 5000,
                category: "Laundry"
            }
        ];

        const ecoFlowProducts = [
            // DELTA Products
            {
                name: "DELTA Mini",
                series: "DELTA",
                baseCapacity: 0.882,
                maxPower: 1400,
                surgePower: 2100,
                expandable: false
            },
            {
                name: "DELTA 2",
                series: "DELTA",
                baseCapacity: 1.024,
                maxPower: 1800,
                surgePower: 2700,
                expandable: true,
                maxCapacity: 2.048
            },
            {
                name: "DELTA 2 Max",
                series: "DELTA",
                baseCapacity: 2048,
                maxPower: 2400,
                surgePower: 3400,
                expandable: true,
                maxCapacity: 6.048
            },
             {
                name: "DELTA 3",
                series: "DELTA",
                baseCapacity: 1024,
                maxPower: 1800,
                surgePower: 3600,
                expandable: true,
                maxCapacity: 6.048
            },
            {
                name: "DELTA 3 Plus (2 solar inputs)",
                series: "DELTA",
                baseCapacity: 1024,
                maxPower: 1800,
                surgePower: 3600,
                expandable: true,
                maxCapacity: 6.048
            },
            {
                name: "DELTA 3 1500",
                series: "DELTA",
                baseCapacity: 1536,
                maxPower: 1800,
                surgePower: 3600,
                expandable: true,
                maxCapacity: 6.048
            },
            {
                name: "DELTA Pro",
                series: "DELTA",
                baseCapacity: 3.6,
                maxPower: 3600,
                surgePower: 7200,
                expandable: true,
                maxCapacity: 10.8
            },
            {
                name: "DELTA 3 Pro",
                series: "DELTA",
                baseCapacity: 4.096,
                maxPower: 4000,
                surgePower: 8000,
                expandable: true,
                maxCapacity: 12.288
            },
            {
                name: "DELTA Pro Ultra",
                series: "DELTA",
                baseCapacity: 6,
                maxPower: 7200,
                surgePower: 7200,
                expandable: true,
                maxCapacity: 30
            },
            
            // RIVER Products
            {
                name: "RIVER Pro",
                series: "RIVER",
                baseCapacity: 0.72,
                maxPower: 600,
                surgePower: 1200,
                expandable: true,
                maxCapacity: 1.44
            },
            {
                name: "RIVER 2",
                series: "RIVER",
                baseCapacity: 0.24,
                maxPower: 300,
                surgePower: 600,
                expandable: false
            },
            {
                name: "RIVER 2 Max",
                series: "RIVER",
                baseCapacity: 0.512,
                maxPower: 500,
                surgePower: 1000,
                expandable: false
            },
            {
                name: "RIVER 2 Pro",
                series: "RIVER",
                baseCapacity: 0.716,
                maxPower: 800,
                surgePower: 1600,
                expandable: false
            },
            {
                name: "RIVER 3",
                series: "RIVER",
                baseCapacity: 0.245,
                maxPower: 300,
                surgePower: 600,
                expandable: false
            },
            {
                name: "RIVER 3 Plus",
                series: "RIVER",
                baseCapacity: 0.286,
                maxPower: 600,
                surgePower: 1200,
                expandable: true,
                maxCapacity: 0.572
            },
            {
                name: "RIVER 3 Plus Max Wireless ( adds a 5k Rapid charger )",
                series: "RIVER",
                baseCapacity: 0.858,
                maxPower: 600,
                surgePower: 1200,
                expandable: true,
                maxCapacity: 0.572
            },
            {
                name: "RIVER 3 Max",
                series: "RIVER",
                baseCapacity: 0.572,
                maxPower: 600,
                surgePower: 1200,
                expandable: true,
                maxCapacity: 0.858
            },
            {
                name: "RIVER 3 Max Plus",
                series: "RIVER",
                baseCapacity: 0.858,
                maxPower: 600,
                surgePower: 1200,
                expandable: true
            }




            

        ];

const productAffiliateLinks = {
    "DELTA Mini":      "https://us.ecoflow.com/products/delta-mini-portable-power-station?sca_ref=7408943.R33f7CbNF7",
    "DELTA 2":         "https://us.ecoflow.com/products/delta-2-portable-power-station?_pos=1&_sid=cd6c8860b&_ss=r&variant=40569176326217&sca_ref=7408943.R33f7CbNF7&sca_source=EcoFlow DELTA 2",
    "DELTA 2 Max":     "https://us.ecoflow.com/products/delta-2-max-portable-power-station?_pos=1&_sid=cc369e7d5&_ss=r&variant=40538145095753&sca_ref=7408943.R33f7CbNF7&sca_source=delta 2 max",
    "DELTA 3":         "https://us.ecoflow.com/products/delta-3-portable-power-station?_pos=1&_sid=f54de58a6&_ss=r&variant=42017992048713&sca_ref=7408943.R33f7CbNF7&sca_source=Delta 3"
    "DELTA 3 Plus":    "https://us.ecoflow.com/products/delta-3-plus-portable-power-station?_pos=1&_sid=3ff778c93&_ss=r&variant=54588299575369&sca_ref=7408943.R33f7CbNF7&sca_source=Delta 3 plus"
    "DELTA 3 1500":    "https://us.ecoflow.com/products/ecoflow-delta-3-1500-solar-generator?_pos=2&_sid=8d7d9a1ce&_ss=r&variant=41836896682057&sca_ref=7408943.R33f7CbNF7&sca_source=Delta 3 1500"
    "DELTA Pro":       "https://us.ecoflow.com/products/delta-pro-portable-power-station?sca_ref=7408943.R33f7CbNF7",
    "DELTA 3 Pro":     "https://us.ecoflow.com/products/delta-pro-3-portable-power-station?sca_ref=7408943.R33f7CbNF7&sca_source=DELTA PRO 3",
    "DELTA Pro Ultra": "https://us.ecoflow.com/products/delta-pro-ultra?sca_ref=7408943.R33f7CbNF7",
    "RIVER Pro":       "https://us.ecoflow.com/products/river-pro-river-pro-extra-battery-bundle?sca_ref=7408943.R33f7CbNF7",
    "RIVER 2":         "https://us.ecoflow.com/products/river-2-portable-power-station?_pos=1&_sid=0234254f1&_ss=r&variant=40589642039369&sca_ref=7408943.R33f7CbNF7&sca_source=River 2",
    "RIVER 2 Max":     "https://us.ecoflow.com/products/river-2-max-portable-power-station?sca_ref=7408943.R33f7CbNF7",
    "RIVER 2 Pro":     "https://us.ecoflow.com/products/river-2-pro-portable-power-station?_pos=2&_sid=13bd458b5&_ss=r&sca_ref=7408943.R33f7CbNF7&sca_source=River 2 Pro",
    "RIVER 3":         "https://us.ecoflow.com/products/river-3-portable-power-station?_pos=1&_sid=11ece7428&_ss=r&variant=41636504305737&sca_ref=7408943.R33f7CbNF7&sca_source=River 3",
    "RIVER 3 Plus":    "https://us.ecoflow.com?sca_ref=7408943.R33f7CbNF7&utm_source=uppromote&utm_medium=community&utm_campaign=koc",
    "RIVER 3 Max":     "https://us.ecoflow.com?sca_ref=7408943.R33f7CbNF7&utm_source=uppromote&utm_medium=community&utm_campaign=koc",
    "RIVER 3 Max Plus": "https://us.ecoflow.com?sca_ref=7408943.R33f7CbNF7&utm_source=uppromote&utm_medium=community&utm_campaign=koc",
    "RIVER 3 Max Plus Wreless": "https://us.ecoflow.com/products/river-3-max-plus-wireless?_pos=1&_sid=e77e636dd&_ss=r&variant=54478642905161&sca_ref=7408943.R33f7CbNF7&sca_source=RIVER 3 Max Plus Wireless"
    "RAPID 10K":        "https://us.ecoflow.com/collections/power-bank/products/ecoflow-rapid-magnetic-power-bank-10000mah?variant=42021147443273&sca_ref=7408943.R33f7CbNF7&sca_source=Rapid 10k"
    "RAPID 5K":         "https://us.ecoflow.com/products/rapid-magnetic-power-bank-5000mah?variant=54347781832777&sca_ref=7408943.R33f7CbNF7&sca_source=Rapid 5k"







    // Add more products and their affiliate links here
};

        function createApplianceRow(index) {
            return `
                <div class="appliance-row" id="appliance-${index}">
                    <select class="appliance-select" onchange="updateWattage(${index})">
                        <option value="">Select Appliance</option>
                        ${commonAppliances.map(app => 
                            `<option value="${app.name}">${app.name}</option>`
                        ).join('')}
                    </select>
                    <input type="number" class="running-watts" placeholder="Running Watts" onchange="calculatePower()">
                    <input type="number" class="starting-watts" placeholder="Starting Watts" onchange="calculatePower()">
                    <input type="number" class="hours" placeholder="Hours" min="0" max="24" onchange="calculatePower()">
                    <div class="daily-kwh">0 kWh</div>
                </div>
            `;
        }
// Add this function right before initializeCalculator();
function printResults() {
    // Create a new window for printing
    const printWindow = window.open('', '_blank');
    
    // Get all the current values
    const totalWatts = document.getElementById('totalWatts').textContent;
    const totalStarting = document.getElementById('totalStarting').textContent;
    const totalKwh = document.getElementById('totalKwh').textContent;
    const recommendation = document.getElementById('recommendation').innerHTML;
    
    // Get appliance data
    let applianceTable = '<table border="1" cellpadding="10" style="border-collapse: collapse; width: 100%;">';
    applianceTable += '<tr><th>Appliance</th><th>Running Watts</th><th>Starting Watts</th><th>Hours/Day</th><th>Daily kWh</th></tr>';
    
    document.querySelectorAll('.appliance-row:not(.grid-header)').forEach(row => {
        const select = row.querySelector('.appliance-select');
        if (select.value) {  // Only include rows where an appliance is selected
            applianceTable += '<tr>';
            applianceTable += `<td>${select.value}</td>`;
            applianceTable += `<td>${row.querySelector('.running-watts').value}</td>`;
            applianceTable += `<td>${row.querySelector('.starting-watts').value}</td>`;
            applianceTable += `<td>${row.querySelector('.hours').value}</td>`;
            applianceTable += `<td>${row.querySelector('.daily-kwh').textContent}</td>`;
            applianceTable += '</tr>';
        }
    });
    applianceTable += '</table>';

    // Create the print content with styling
    const printContent = `
        <html>
        <head>
            <title>BlackoutBuddy Results</title>
            <style>
                body {
                    font-family: Arial, sans-serif;
                    padding: 20px;
                    line-height: 1.6;
                }
                h1 {
                    color: #4c3a5f;
                    text-align: center;
                }
                .summary {
                    margin: 20px 0;
                    padding: 10px;
                    background: #f8f9fa;
                    border-radius: 5px;
                }
                table {
                    margin: 20px 0;
                }
                th {
                    background: #4c3a5f;
                    color: white;
                }
                td, th {
                    padding: 8px;
                    text-align: left;
                }
                .recommendation {
                    margin-top: 20px;
                    padding: 10px;
                    background: #f8f9fa;
                    border-radius: 5px;
                }
                @media print {
                    body {
                        padding: 0;
                    }
                    button {
                        display: none;
                    }
                }
            </style>
        </head>
        <body>
            <h1>BlackoutBuddy - Power Usage Report</h1>
            
            <div class="summary">
                <h2>Power Summary</h2>
                <p>${totalWatts}</p>
                <p>${totalStarting}</p>
                <p>${totalKwh}</p>
            </div>

            <h2>Selected Appliances</h2>
            ${applianceTable}

            <div class="recommendation">
                <h2>Recommendation</h2>
                ${recommendation}
            </div>
            
            <button onclick="window.print()" style="margin-top: 20px; padding: 10px;">Print this page</button>
        </body>
        </html>
    `;

    // Write the content to the new window and print
    printWindow.document.write(printContent);
    printWindow.document.close();
}


        function initializeCalculator() {
            const container = document.getElementById('applianceRows');
            for (let i = 0; i < 5; i++) {
                container.innerHTML += createApplianceRow(i);
            }
        }

        function updateWattage(index) {
            const row = document.getElementById(`appliance-${index}`);
            const select = row.querySelector('.appliance-select');
            const selectedAppliance = commonAppliances.find(app => app.name === select.value);
            
            if (selectedAppliance) {
                row.querySelector('.running-watts').value = selectedAppliance.runningWatts;
                row.querySelector('.starting-watts').value = selectedAppliance.startingWatts;
                calculatePower();
            }
        }

        function calculatePower() {
            let totalRunningWatts = 0;
            let totalStartingWatts = 0;
            let totalDailyKwh = 0;

            document.querySelectorAll('.appliance-row').forEach(row => {
                if (row.classList.contains('grid-header')) return;

                const runningWatts = Number(row.querySelector('.running-watts').value) || 0;
                const startingWatts = Number(row.querySelector('.starting-watts').value) || 0;
                const hours = Number(row.querySelector('.hours').value) || 0;

                const dailyKwh = (runningWatts * hours) / 1000;
                row.querySelector('.daily-kwh').textContent = `${dailyKwh.toFixed(2)} kWh`;

                totalRunningWatts += runningWatts;
                totalStartingWatts = Math.max(totalStartingWatts, startingWatts);
                totalDailyKwh += dailyKwh;
            });

            document.getElementById('totalWatts').textContent = 
                `Total Running Watts: ${totalRunningWatts.toLocaleString()} W`;
            document.getElementById('totalStarting').textContent = 
                `Maximum Starting Watts: ${totalStartingWatts.toLocaleString()} W`;
            document.getElementById('totalKwh').textContent = 
                `Total Daily Usage: ${totalDailyKwh.toFixed(2)} kWh`;

            recommendSystem(totalRunningWatts, totalStartingWatts, totalDailyKwh);
        }

        function recommendSystem(runningWatts, startingWatts, dailyKwh) {
    let recommendation = '';
    const defaultAffiliateLink = "";
    
    // First, make sure we're checking both DELTA and RIVER products
    // We need to see the ecoFlowProducts array structure
    console.log('Available products:', ecoFlowProducts);
    
    const suitableProducts = ecoFlowProducts.filter(product => {
        const meetsRequirements = 
            product.maxPower >= runningWatts &&
            product.surgePower >= startingWatts &&
            product.baseCapacity >= (dailyKwh * 0.8);
            
        console.log(`Checking ${product.name}:`, {
            meetsMaxPower: product.maxPower >= runningWatts,
            meetsSurgePower: product.surgePower >= startingWatts,
            meetsCapacity: product.baseCapacity >= (dailyKwh * 0.8)
        });
        
        return meetsRequirements;
    });

    if (suitableProducts.length === 0) {
        const deltaProUltra = ecoFlowProducts.find(p => p.name === "DELTA Pro Ultra");
        const affiliateLink = productAffiliateLinks[deltaProUltra.name] || defaultAffiliateLink;
        recommendation = `
            <h3>Recommended: DELTA Pro Ultra</h3>
            <p>Based on your power needs:</p>
            <ul>
                <li>Running Power: ${runningWatts.toLocaleString()} W</li>
                <li>Starting Power: ${startingWatts.toLocaleString()} W</li>
                <li>Daily Usage: ${dailyKwh.toFixed(2)} kWh</li>
            </ul>
            <p>The DELTA Pro Ultra with expansion batteries would be most suitable.</p>
            <p>Shop here: <a href="${affiliateLink}" target="_blank" class="shop-link">EcoFlow Store</a></p>
        `;
    } else {
        // Instead of just taking the first suitable product, sort them by best fit
        const sortedProducts = suitableProducts.sort((a, b) => {
            // Sort by closest match to required specifications
            const aOverhead = (a.maxPower - runningWatts) + (a.surgePower - startingWatts);
            const bOverhead = (b.maxPower - runningWatts) + (b.surgePower - startingWatts);
            return aOverhead - bOverhead;
        });

        const bestFit = sortedProducts[0];
        const affiliateLink = productAffiliateLinks[bestFit.name] || defaultAffiliateLink;
        recommendation = `
            <h3>Recommended: ${bestFit.name}</h3>
            <p>Based on your power needs:</p>
            <ul>
                <li>Running Power: ${runningWatts.toLocaleString()} W</li>
                <li>Starting Power: ${startingWatts.toLocaleString()} W</li>
                <li>Daily Usage: ${dailyKwh.toFixed(2)} kWh</li>
            </ul>
            <p>System Specifications:</p>
            <ul>
                <li>Series: ${bestFit.series}</li>
                <li>Base Capacity: ${bestFit.baseCapacity} kWh</li>
                <li>Maximum Output: ${bestFit.maxPower} W</li>
                <li>Surge Capacity: ${bestFit.surgePower} W</li>
            </ul>
            ${bestFit.expandable ? `<p>Expandable up to ${bestFit.maxCapacity} kWh with extra batteries.</p>` : ''}
            <p>Shop here: <a href="${affiliateLink}" target="_blank" class="shop-link">EcoFlow Store</a></p>
        `;
    }

    // Add the disclaimer to the recommendation
    recommendation += `
        <div class="recommendation-disclaimer" style="background-color: rgba(255, 255, 255, 0.1); padding: 10px; margin-top: 15px; border-left: 4px solid #FFD700; color: #ffffff;">
            <strong>Note:</strong> This recommendation is based on the information provided. You may need multiple units 
            or a larger capacity battery system if you require longer run times or have additional power needs. 
            Please consult with a professional for critical power backup solutions.
        </div>
    `;

    document.getElementById('recommendation').innerHTML = recommendation;
}

    document.getElementById('resetButton').addEventListener('click', function() {
    if (confirm('Are you sure you want to reset all values?')) {
        // Reset appliance selections
        document.querySelectorAll('.appliance-select').forEach(select => {
            select.value = '';
        });
        
        // Reset all number inputs
        document.querySelectorAll('input[type="number"]').forEach(input => {
            input.value = '';
        });
        
        // Reset daily kWh values
        document.querySelectorAll('.daily-kwh').forEach(div => {
            div.textContent = '0 kWh';
        });
        
        // Reset total values
        document.getElementById('totalWatts').textContent = 'Total Running Watts: 0 W';
        document.getElementById('totalStarting').textContent = 'Total Starting Watts: 0 W';
        document.getElementById('totalKwh').textContent = 'Total Daily Usage: 0 kWh';
        
        // Reset recommendation section
        document.getElementById('recommendation').innerHTML = 'Select appliances to get recommendations.';
    }
        });

        initializeCalculator();



function updateRecommendations(totalWatts, dailyKwh) {
  const recommendationDiv = document.getElementById('recommendation');
  let recommendationHTML = '<h3>Recommended Power Stations</h3>';
  
  const matchingProducts = Object.values(productRecommendations)
    .filter(product => product.wattage >= totalWatts && product.capacity >= (dailyKwh * 1000));

  if (matchingProducts.length === 0) {
    recommendationHTML += '<p>No matching products found for your power needs.</p>';
  } else {
    matchingProducts.forEach(product => {
      recommendationHTML += `
        <div class="product-card">
          <h4>${product.name}</h4>
          <p>${product.description}</p>
          <ul>
            <li>Wattage: ${product.wattage}W</li>
            <li>Capacity: ${product.capacity}Wh</li>
            <li>Price: $${product.price}</li>
          </ul>
          <a href="${product.affiliate}" target="_blank" class="buy-button">
            Buy Now - Save 5% with code "solarscout"
          </a>
        </div>
      `;
    });
  }
  
  recommendationDiv.innerHTML = recommendationHTML;
}

// Call this function whenever the calculator updates totals
// updateRecommendations(totalWatts, dailyKwh);

    </script>
</body>
</html>
